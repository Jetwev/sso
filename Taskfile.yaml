version: "3"

tasks:
  migrations:
    aliases:
      - migrate
    desc: "Run migrations"
    cmds:
      - go run ./cmd/migrator --storage-path=./storage/sso.db --migrations-path=./migrations
    
  execution:
    aliases:
      - exec
    desc: "Run the service"
    cmds:
      - go run cmd/sso/main.go --config=./config/local.yaml

  test_migrations:
    aliases:
      - test_migrate
    desc: "Run test migrations"
    cmds:
      - go run ./cmd/migrator/main.go --storage-path=./storage/sso.db --migrations-path=./tests/migrations --migrations-table=migrations_test
